<!DOCTYPE html>
<html>
<head>
		<link rel="stylesheet" href="flopoco.css">
			<meta charset="utf-8"> 
  <title>FloPoCo installation manual</title>
</head>

<body>
<h1>FloPoCo installation  manual</h1>

<p style="text-align: center"> <img src="FloPoCoSmall.png"/>	</p>
<ul>
	<li> <a href="#linux">Installation on Linux</a></li>  
	<li> <a href="#windows">Installation in Windows</a></li> 
</ul>
<p>Operators tend to come and go as we struggle to support them, and we apologize for that. Maybe the one you want works better in an older version: read the <a href="ReleaseNotes.txt">release notes</a>.</p> 



<hr/>
<h2><a name="linux">Installation in Ubuntu and other Debian derivative</a></h2>


<h3>Single-line installation scripts</h3>
<p>These scripts should work on the current Debian, Ubuntu,  and other Debian derivatives.</p>
<em>We would welcome similar installation scripts for other platforms.</em>

Copy this in a dash/bash shell (and enter your password when prompted):


<h4>Latest version 4, which will be the greatest ever, if it ever gets out of beta</h4>

<ul>
	<li> <kbd>cd</kbd> to a directory where all the necessary files will be download and compiled.
	</li>  
	<li>Since version 4.0.beta2 you need to download the  SCIP optimization suite from   <a href="http://scip.zib.de/download.php?fname=scipoptsuite-3.2.1.tgz">http://scip.zib.de/download.php?fname=scipoptsuite-3.2.1.tgz</a>. (we cannot fetch it automatically as the other dependencies below, because there is a button to click).
		Save the tgz in this directory.</li>  
	<li>Then (still in the same directory) copy-paste the following line:
		<p><kbd>yes | sudo apt-get install g++ libgmp3-dev libmpfr-dev libfplll-dev libxml2-dev bison libmpfi-dev flex cmake libboost-all-dev libgsl0-dev libreadline-dev zlib1g-dev && tar xzf scipoptsuite-3.2.1.tgz && cd scipoptsuite-3.2.1 && mv Makefile Makefile.broken &&  sed -e 's/INSTALLDIR=..\/$(INSTALLDIR)/INSTALLDIR=$(INSTALLDIR)/g' Makefile.broken > Makefile && make -j4 ZIMPL=false && sudo make ZIMPL=false install INSTALLDIR=/usr/local && cd .. && wget https://gforge.inria.fr/frs/download.php/33151/sollya-4.1.tar.gz && tar xzf sollya-4.1.tar.gz && cd sollya-4.1/ && ./configure && make -j4  && sudo make install && cd .. && wget https://gforge.inria.fr/frs/download.php/file/35449/flopoco-4.0.beta0.tgz && tar xzf flopoco-4.0.beta0.tgz && cd flopoco-4.0.beta0/ && cmake . && make -j4  && ./flopoco && ./flopoco BuildHTMLDoc </kbd></p>	</li>  
	<li>
		Optionally, enable bash autocompletion by typing <kbd>./flopoco BuildAutocomplete</kbd> and following the instructions. </li>  
</ul>
<p>Once the above line has installed all the dependencies, you may also live on the edge and compile the git version available from the <a href="https://gforge.inria.fr/scm/?group_id=1030">source code repository</a></p>



<h4>Version 2.5.0, the last version before the transition to Sollya4 broke everything that bit heaps had not yet broken</h4>
<p><kbd>yes | sudo apt-get install g++ libgmp3-dev libmpfr-dev libxml2-dev bison libmpfi-dev flex cmake libboost-all-dev libgsl0-dev && wget https://gforge.inria.fr/frs/download.php/file/34429/libfplll-3.0.12.tar.gz && tar xzf libfplll-3.0.12.tar.gz && cd libfplll-3.0.12/ && ./configure && make -j2  && sudo make install && cd .. && wget https://gforge.inria.fr/frs/download.php/28571/sollya-3.0.tar.gz && tar xzf sollya-3.0.tar.gz && cd sollya-3.0/ && ./configure && make -j4  && sudo make install && cd .. && wget https://gforge.inria.fr/frs/download.php/file/32591/flopoco-2.5.0.tgz  && tar xzf flopoco-2.5.0.tgz && cd flopoco-2.5.0/ && cmake . && make -j4  && ./flopoco</kbd></p>

<h4>Version 2.3.2, the last version before the Great Leader embarked the project in the bit heap hazardous adventure</h4>
<p><kbd>yes | sudo apt-get install g++ libgmp3-dev libmpfr-dev libxml2-dev bison libmpfi-dev flex cmake libboost-all-dev libgsl0-dev && wget https://gforge.inria.fr/frs/download.php/file/34429/libfplll-3.0.12.tar.gz && tar xzf libfplll-3.0.12.tar.gz && cd libfplll-3.0.12/ && ./configure && make -j2  && sudo make install && cd .. && wget https://gforge.inria.fr/frs/download.php/28571/sollya-3.0.tar.gz && tar xzf sollya-3.0.tar.gz && cd sollya-3.0/ && ./configure && make -j4  && sudo make install && cd .. && wget https://gforge.inria.fr/frs/download.php/file/35206/flopoco-2.3.2.tgz  && tar xzf flopoco-2.3.2.tgz && cd flopoco-2.3.2/ && cmake . && make -j4  && ./flopoco</kbd></p>

<h4>Older versions may include operators that have later been deprecated. Look up the <a href="https://gforge.inria.fr/scm/?group_id=1030">source code repository</a></h4>


<h3>Generic installation instructions</h3>

<p>FloPoCo may be compiled either using CMake or the autotools. 
The recommended way is CMake, which is available for most Unix and Linux distributions and for Windows. 
If you prefer to use the autotools read the README.autotools file.</p>

<p><a href="http://www.cmake.org/">CMake</a> is included in  mainstream Linux/Unix distributions, and is available for other operating systems, including Windows.</p>

<p>FloPoCo also depends on the <a href="http://www.mpfr.org">MPFR library</a>, on the C++ interface to GMP (which may or may not be a dependency of MPFR) and on flex++,
all of which are probably available in your favourite Linux/Unix
distribution. </p>

<p>You really want to link FloPoCo against <a href="http://sollya.gforge.inria.fr/">Sollya</a>. 
Most advanced operators depend on it, to the point that we don't check anymore that FloPoCo compiles without Sollya... 
For this purpose, you must download, compile and install <a href="http://sollya.gforge.inria.fr/">Sollya</a>.
<ul>
<li>FloPoCo up to version 2.5.0 works with version 3.0 of Sollya. 
This in turn requires libfpll-3.0, which is no longer available on the author's page: 
<a href="https://gforge.inria.fr/frs/download.php/file/34429/libfplll-3.0.12.tar.gz"> a copy is available here </a>  </li>
<li>FloPoCo version 3.0 and later require Sollya 4.0 or later (and libfplll has become a Debian package, which makes things simpler).</li>
</ul>

</p>

<p>Compilation is a two-step process:</p>

<p><kbd>cmake .</kbd></p>

<p><kbd>make</kbd></p>


<p>The adventurous may get the development version of FloPoCo from its <a href="https://gforge.inria.fr/scm/?group_id=1030">source code repository</a>.</p>


<hr/>
<h2><a name="windows">Installation in Windows</a></h2>

Here is a simple way to get FloPoCo running in a virtual machine under Windows.

You will need to install : 
	<ul>
	  <li><a href="http://www.virtualbox.org/wiki/Downloads">VirtualBox</a></li>
	  <li><a href="http://www.vagrantup.com/">Vagrant</a></li>
	  <li>A SSH Client. If you are running Linux or Mac, you already have one. If you are using Windows, I recommended you "Putty".</li>
	</ul> 
	
	<h3>Installing Ubuntu in a Vagrant virtual box</h3>
	
	<p>Create a folder where you want to contain all the Vagrant files.	</p>
		<p>	Open a command prompt and go into this folder. If you are using windows, you can quickly open a command prompt by holding down shift and right-clicking the project folder, then choose “open command window here”.	</p>
	
	<p>	Now type the following commands :
		<p><kbd>vagrant init ubuntu/trusty32</kbd></p>
		<p><kbd>vagrant up</kbd></p>
  The first time, it may take some time depending on your internet connection.	</p>
	
	<h3>Connecting to the virtual machine by SSH</h3>
	You have two solutions at this point :
	<ul>
		<li>Using your favorite ssh client, connect to your virtual machine with the following parameters :
		<ul>
			<li>Adress : 127.0.0.1</li>
			<li>Port : The port is given during the execution of "vagrant up". By default 2222.</li>
			<li>Login : vagrant</li>
			<li>Password : vagrant</li>
		</ul></li>
		
		<li>You can also try to type "vagrant ssh" in your prompt, sometime it works. The result is the same thing.
		</ul></li>
	
	<h3>Updating your virtual machine</h3>
	Now that your are connected to your virtual machine, type the following commands :
		<p><kbd>sudo apt-get update</kbd></p>
		<p><kbd>sudo apt-get upgrade</kbd></p>
	If a prompt asks you something, just press "y".
	
	<h3>Installing Flopoco on your virtual machine</h3>
	Go to the <a href="#linux">Linux installation instructions</a></a> :
	Copy one of the one-line installation scripts and paste it into the prompt of your virtual machine.
	Wait. Sometime, you will be asked to press "y".
		
	<h3>Some common problems</h3>
	<ul>
		<li>You can not acess the VM using SSH : open VirtualBox, click right on your Vagrant Machine in the list, and shutdown and restart the VM.</li>
		<li>During the execution of "vagrant up", the script loops trying to access the Vm using ssh : Don't worry (be happy), Stop the script. And restart your virtual machine directly into VirtualBox.</li>
		<li>If you have some problems when "vagrant up" and using Linux, try to run the commands as root.</li>
		<li>The single-line installation script hangs, possibly with a lot of "y" in the terminal: just reboot the virtual machine and start again. It works the second time.</li>
		<li>If nothing work, just reboot your computer. Reboot solves more or less everything.</li>
	</ul>
	If you encountered others problems, give us feedback and if possible solutions so that we can add them to the preceeding list.

</body>
</html>
